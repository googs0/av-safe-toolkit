meta:
  id: who_ieee_mvp
  version: "0.2.0"
  notes: "Illustrative WHO noise + IEEE 1789 piecewise profile. Replace with validated constants."
  citations:
    - WHO Environmental Noise Guidelines (2018) — placeholder
    - IEEE 1789-2015 — placeholder

rules:
  - id: who.night.laeq
    type: noise.laeq.exceedance
    hour_range: [22, 7]
    threshold_db: 45
    min_fraction: 0.10
    severity: AMBER
    message: "Night LAeq exceeded guideline for ≥10% of minutes"

  - id: who.day.laeq
    type: noise.laeq.exceedance
    hour_range: [7, 22]
    threshold_db: 55
    min_fraction: 0.10
    severity: AMBER
    message: "Day LAeq exceeded guideline for ≥10% of minutes"

  - id: ieee1789.formula.low_risk
    type: light.flicker.ieee1789
    assess: LOW_RISK
    min_fraction: 0.05
    severity: AMBER
    message: "Percent modulation exceeds LOW_RISK curve for ≥5% of minutes"
    model:
      NOEL:
        - { f_min: 0,   f_max: 90,   k: 0.025, b: 0 }
        - { f_min: 90,  f_max: 1250, k: 0.08,  b: 0 }
      LOW_RISK:
        - { f_min: 0,   f_max: 90,   k: 0.033, b: 0 }
        - { f_min: 90,  f_max: 1250, k: 0.10,  b: 0 }

locales:
  munich:   { night_threshold_db: 45, day_threshold_db: 55, quiet_hours: [22, 7] }
  hamburg:  { night_threshold_db: 45, day_threshold_db: 55, quiet_hours: [22, 7] }
  cologne:  { night_threshold_db: 45, day_threshold_db: 55, quiet_hours: [22, 7] }
  stuttgart:{ night_threshold_db: 45, day_threshold_db: 55, quiet_hours: [22, 7] }
  berlin:   { night_threshold_db: 45, day_threshold_db: 55, quiet_hours: [22, 7] }
  genoa:    { night_threshold_db: 45, day_threshold_db: 55, quiet_hours: [23, 7] }
  bolzano:  { night_threshold_db: 45, day_threshold_db: 55, quiet_hours: [22, 7] }
  trento:   { night_threshold_db: 45, day_threshold_db: 55, quiet_hours: [22, 7] }
  turin:    { night_threshold_db: 45, day_threshold_db: 55, quiet_hours: [22, 7] }
  porto:    { night_threshold_db: 45, day_threshold_db: 55, quiet_hours: [23, 7] }
  lisbon:   { night_threshold_db: 45, day_threshold_db: 55, quiet_hours: [23, 7] }
  grenoble: { night_threshold_db: 45, day_threshold_db: 55, quiet_hours: [22, 7] }
